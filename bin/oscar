#!/usr/bin/python2.7
# -*- coding:utf-8 mode:python -*-

import os,sys
import argparse

sys.path.append(os.path.dirname(os.path.abspath(__file__)) + '/../lib')

import oscar

import init
import add
import search
import web
import walk
import consume
import cleanup
import truncate
import extract

__author__ = "Walbrix Corporation"
__version__ = "0.0.1"

parser = argparse.ArgumentParser()
parser.add_argument("-v", "--verbose", action="store_true")
parser.add_argument("-l", "--log", default=None)

subparsers = parser.add_subparsers()

init.parser_setup(subparsers.add_parser("init"))
add.parser_setup(subparsers.add_parser("add"))
search.parser_setup(subparsers.add_parser("search"))
web.parser_setup(subparsers.add_parser("web"))
walk.parser_setup(subparsers.add_parser("walk"))
consume.parser_setup(subparsers.add_parser("consume"))
cleanup.parser_setup(subparsers.add_parser("cleanup"))
truncate.parser_setup(subparsers.add_parser("truncate"))
extract.parser_setup(subparsers.add_parser("extract"))

args = parser.parse_args()

oscar.init()
oscar.logger_init(args.name, args.verbose, args.log)

result = args.func(args)

#oscar.fin()
sys.exit(result if result else 0)
